function init(){localStorage.getItem("__token__")&&window.location.replace("/app")}function resetError(){document.getElementById("message").style.background="white",document.getElementById("message").innerHTML=""}function setError(e){document.getElementById("message").style.background="red",document.getElementById("message").innerHTML=`<span>${e}</span>`}loginForm.onsubmit=(async e=>{try{e.preventDefault(),resetError();let t=new FormData(loginForm),o={};t.forEach((e,t)=>{o[t]=e});let r=JSON.stringify(o),n=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:r});if(502===n.status)setError("Some error occurred on the server");else{let e=await n.json();n.ok?(localStorage.setItem("__token__",e.token),window.location.replace("/app")):setError(e.message)}}catch(e){setError("Some error occurred on the server")}}),window.addEventListener("load",init);